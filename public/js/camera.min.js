(function(a){function b(){l&&l.getTracks().forEach(a=>{a.stop()})}async function c(){b(),k.video.facingMode=m?"user":"environment";try{l=await navigator.mediaDevices.getUserMedia(k),d.srcObject=l}catch(a){hl.modal(a.message)}}if(!1 in navigator||!1 in navigator.mediaDevices)return void alert("Camera API is not available in your browser");const d=document.querySelector("#camera-container"),e=document.querySelector("#btn-photo"),f=document.querySelector("#btn-capture"),g=document.querySelector("#btn-switch"),h=document.querySelector("#change-asset"),i=document.querySelector("#canvas"),j=document.querySelector("#devicesSelect"),k={video:{width:{ideal:"auto"},height:{ideal:"auto"}}};let l,m=!0;e.addEventListener("click",function(){d.play(),e.classList.add("d-none"),f.classList.remove("d-none"),$("#camera-container").removeClass("d-none"),$("#img-preview-camera").addClass("d-none"),$("#btn-switch").removeClass("d-none")}),f.addEventListener("click",function(){$("#camera-container").addClass("d-none"),d.pause(),i.width=d.videoWidth,i.height=d.videoHeight,i.getContext("2d").drawImage(d,0,0),$("#photo").val(i.toDataURL("image/png")),$("#change-asset").attr("src",i.toDataURL("image/png")),e.classList.remove("d-none"),f.classList.add("d-none"),$("#btn-switch").addClass("d-none"),$("#img-preview-camera").removeClass("d-none")}),g.addEventListener("click",function(){m=!m,c(),e.classList.remove("d-none"),f.classList.add("d-none"),$("#camera-container").removeClass("d-none"),$("#img-preview-camera").addClass("d-none"),$("#btn-switch").removeClass("d-none"),d.play()}),a.Camera=c})(window);